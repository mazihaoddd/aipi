## Yolov6笔记
•作者提到重参数化虽然是优秀的技术，但是无法进行模型缩放，而单路网络结构对于大型神经网络而言并不可行，再参数化的检测器的量化也需要细致的处理，yolov6相较于之前的版本，更重视部署中的工作，为了在不降低性能的情况下提高推理速度，作者研究了尖端的量化方法，包括训练后量化（PTQ）和量化感知训练（QAT）

•YOLOv6在不同场景下的工业应用量有着一系列不同规模的网络。不同规模的架构可实现最佳的速度和准确性的权衡，其中小模型以普通的单路径主干为特征，而大模型建立在高效的多分支块上。

•YOLOv6注入了一个自蒸馏策略，在分类任务和回归任务上都执行。同时，我们动态调整来自教师和标签的知识，以帮助学生模型在所有训练阶段更有效地学习知识。

•作者广泛地验证了先进的标签分配检测技术、损失函数和数据增强技术，并有选择性地采用它们来进一步提高性能。

•作者在重新优化器（RepOptimizer）和通道蒸馏的帮助下改革了定量检测方案，得到了一个不断快速和准确的探测器。

### 2.1网络设计

Yolov6的主干网络为EfficientRep，RepBlock 作为小型网络的基石，在小型网络中以相似的推理速度具有更多的特征表示能力，且充分利用gpu降低推理延迟。

大型网络基于CSPStackRep块，是作者修改过的CSP块，用以平衡推理速度和准确性。YOLOv6的颈部网络沿用了YOLOv4和YOLOv5的PANet加以RepBlocks或CSPStackRep块从而形成RepPAN。

对于颈部， 他们使用PAN 增强了RepBlocks 或CSPStackRepBlocks ， 用于大型模型。而受YOLOX的启发，他们开发了一个高效的解耦头。

头部网络Efficient Decoupled Head 根据hybrid-channel 策略简化了解耦头，更高效。同时使用了Anchor free检测器，其更好的泛化能力和解码预测结果的简单性使得其后处理的时间成本大大降低了。

多分支网络通常比单路径网络具有更好的分类性能，但它往往伴随着并行性的降低，并导致推理延迟的增加

将训练时间的多分支拓扑与推理时间的平面架构解耦，以实现更好的速度精度权衡。

### 2.2标签分配

使用TOOD中介绍的任务排列学习方法进行标签分配。

SimOTA主要用于正样本的匹配，即为不同目标设定不同的正样本数量，进行正负样本的平均。

SimOTA实际为各个GT框进行anchor的分配。分配策略可以理解为，根据不同anchor的模糊程度赋予不同的权重，从而得到分配的数量。因为在OTA中，将模糊的anchor分配给任何GT或背景都会对其他GT的梯度造成不利影响。所以，对模糊anchor样本的分配策略是特殊的。为此，需要进行更优的分配策略：除了考虑分类信息，还考虑了位置信息。也就是为图像中的所有GT对象找到全局的高置信度进行分配。

SIOU 损失函数是引入了所需回归之间的向量角度。这样就重新定义了距离损失，有效降低了回归的自由度，从而加速网络的收敛，进一步提升回归的准确性。

### 3.新的分类和回归损失。
他们使用了一个分类VariFocal损失和一个SIoU/GIoU回归损失。
一个用于回归和分类任务的自我蒸馏策略。
使用RepOptimizer和信道明智蒸馏的检测量化方案，有助于实现更快的检测器。